# Job: run synthetic data generation for plandata tables on serverless compute.
# Script reads CATALOG and SCHEMA from env (defaults in script); set in Job UI or edit scripts/generate_synthetic_plandata.py.

resources:
  jobs:
    generate_synthetic_plandata:
      name: "[${bundle.target}] Generate synthetic plandata"
      description: "Generate synthetic data for plandata tables (carrier, benefitplan, member, provider, enrollkeys, claim, referral). Runs on serverless."
      max_concurrent_runs: 1
      tasks:
        - task_key: generate
          spark_python_task:
            python_file: ../scripts/generate_synthetic_plandata.py
          environment_key: plandata_gen
      environments:
        - environment_key: plandata_gen
          spec:
            environment_version: "4"
            dependencies:
              - faker
